<div class="demo-container">
  <!-- Header -->
  <header class="demo-header">
    <h1 class="text-xl font-semibold mb-2 text-foreground">
      Chat Messages Card Demo
    </h1>
    <p class="text-sm text-muted-foreground mb-3">
      AI æ¶ˆæ¯å¡ç‰‡ - å¯æ‹–æ‹½ã€å¯ç¼©æ”¾çš„å¯¹è¯é¢æ¿
    </p>
    <div class="text-xs text-muted-foreground space-y-1">
      <p>âœ¨ Liquid glass æ•ˆæœ | ğŸ¯ è‡ªç”±æ‹–æ‹½å®šä½ | ğŸ“ å¯è°ƒæ•´å¤§å°</p>
      <p>ğŸ’¬ æ¶ˆæ¯æ°”æ³¡æ ·å¼ | ğŸ“œ è‡ªåŠ¨æ»šåŠ¨åº•éƒ¨ | ğŸ¨ çŸ¿ç‰©ä¸æ—¶å…‰ä¸»é¢˜</p>
    </div>
  </header>

  <!-- æ§åˆ¶é¢æ¿ -->
  @if (showControls()) {
    <aside class="controls-panel">
      <div class="controls-header">
        <h2 class="text-sm font-medium text-foreground">æ§åˆ¶é¢æ¿</h2>
        <button class="icon-button" (click)="toggleControls()" title="éšè—æ§åˆ¶é¢æ¿">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m18 15-6-6m0 6-6-6"/>
          </svg>
        </button>
      </div>

      <!-- å¯è§æ€§æ§åˆ¶ -->
      <div class="control-section">
        <h3 class="control-section-title">å¯è§æ€§</h3>
        <div class="control-row">
          <button
            class="control-button"
            [class.primary]="isVisible()"
            (click)="toggleVisibility()">
            {{ isVisible() ? 'éšè—å¡ç‰‡' : 'æ˜¾ç¤ºå¡ç‰‡' }}
          </button>
        </div>
      </div>

      <!-- æ¶ˆæ¯æ•°æ®æ§åˆ¶ -->
      <div class="control-section">
        <h3 class="control-section-title">æ¶ˆæ¯æ•°æ®</h3>
        <div class="control-stats mb-3">
          <div class="stat-item">
            <span class="stat-label">æ€»æ•°</span>
            <span class="stat-value">{{ messageCount() }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ç”¨æˆ·</span>
            <span class="stat-value">{{ userMessageCount() }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">åŠ©æ‰‹</span>
            <span class="stat-value">{{ assistantMessageCount() }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ç³»ç»Ÿ</span>
            <span class="stat-value">{{ systemMessageCount() }}</span>
          </div>
        </div>
        <div class="control-row gap-2">
          <button class="control-button" (click)="selectMessageSet('sample')">ç¤ºä¾‹æ¶ˆæ¯</button>
          <button class="control-button" (click)="selectMessageSet('single')">å•æ¡æ¶ˆæ¯</button>
          <button class="control-button" (click)="selectMessageSet('long')">é•¿å¯¹è¯</button>
          <button class="control-button" (click)="selectMessageSet('empty')">æ¸…ç©º</button>
        </div>
        <div class="control-row mt-2">
          <button class="control-button" (click)="addMessage()">+ æ·»åŠ æ¶ˆæ¯</button>
          <button class="control-button destructive" (click)="clearMessages()">æ¸…ç©ºå…¨éƒ¨</button>
          <button class="control-button" (click)="restoreDefaultMessages()">æ¢å¤é»˜è®¤</button>
        </div>
      </div>

      <!-- ä½ç½®æ§åˆ¶ -->
      <div class="control-section">
        <h3 class="control-section-title">ä½ç½®</h3>
        <p class="text-xs text-muted-foreground mb-2">
          å½“å‰: {{ getCurrentPositionName() }}
          ({{ round(selectedPosition().x) }}, {{ round(selectedPosition().y) }})
        </p>
        <div class="control-row gap-2">
          <button class="control-button" (click)="selectPosition('centered')">å±…ä¸­</button>
          <button class="control-button" (click)="selectPosition('topLeft')">å·¦ä¸Š</button>
          <button class="control-button" (click)="selectPosition('topRight')">å³ä¸Š</button>
          <button class="control-button" (click)="selectPosition('bottomLeft')">å·¦ä¸‹</button>
          <button class="control-button" (click)="selectPosition('bottomRight')">å³ä¸‹</button>
          <button class="control-button" (click)="resetPosition()">é‡ç½®</button>
        </div>
      </div>

      <!-- å°ºå¯¸æ§åˆ¶ -->
      <div class="control-section">
        <h3 class="control-section-title">å°ºå¯¸</h3>
        <p class="text-xs text-muted-foreground mb-2">
          å½“å‰: {{ getCurrentSizeName() }}
          ({{ selectedSize().width }} Ã— {{ selectedSize().height }})
        </p>
        <div class="control-row gap-2">
          <button class="control-button" (click)="selectSize('small')">å°</button>
          <button class="control-button" (click)="selectSize('medium')">ä¸­</button>
          <button class="control-button" (click)="selectSize('large')">å¤§</button>
          <button class="control-button" (click)="selectSize('wide')">å®½å±</button>
          <button class="control-button" (click)="selectSize('narrow')">çª„é«˜</button>
          <button class="control-button" (click)="resetSize()">é‡ç½®</button>
        </div>
      </div>

      <!-- å®æ—¶äº‹ä»¶æ—¥å¿— -->
      <div class="control-section">
        <h3 class="control-section-title">äº‹ä»¶æ—¥å¿—</h3>
        <div class="event-log">
          <p class="text-xs text-muted-foreground">æ‹–æ‹½æˆ–è°ƒæ•´å¡ç‰‡å¤§å°ï¼Œäº‹ä»¶å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</p>
        </div>
      </div>
    </aside>
  }

  <!-- é‡æ–°æ˜¾ç¤ºæ§åˆ¶é¢æ¿æŒ‰é’® -->
  @if (!showControls()) {
    <button class="show-controls-button" (click)="toggleControls()" title="æ˜¾ç¤ºæ§åˆ¶é¢æ¿">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"/>
        <path d="M12 1v6m0 6v6"/>
        <path d="m4.93 4.93 4.24 4.24m5.66 5.66 4.24 4.24M1 12h6m6 0h6"/>
        <path d="m4.93 19.07 4.24-4.24m5.66-5.66 4.24-4.24"/>
      </svg>
    </button>
  }

  <!-- Chat Messages Card -->
  <app-chat-messages-card
    [messages]="selectedMessages"
    [isVisible]="isVisible"
    [position]="selectedPosition"
    [size]="selectedSize"
    (positionChange)="onPositionChange($event)"
    (sizeChange)="onSizeChange($event)"
  />
</div>
