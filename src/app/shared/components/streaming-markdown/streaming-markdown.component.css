/**
 * Streaming Markdown Component Styles
 *
 * Container styles for the streaming markdown component.
 * Individual block styles are defined in their respective component CSS files.
 */

.streaming-markdown-container {
  /* Container for all rendered blocks */
  /* overflow-y and max-height are set dynamically via component inputs */
}

/* Block router wrapper - provides spacing between blocks */
.markdown-block-router {
  display: block;
  margin-bottom: 1px;
}

/* ========================================
 * Global Code Styles - Critical Overrides
 * These rules ensure code elements have
 * proper line-height for readability
 * ======================================== */

/* Inline code styling (for code within paragraphs and other blocks) */
.inline-code {
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.875rem;
  background: var(--muted);
  padding: 0.125rem 0.25rem;
  border-radius: var(--radius-sm);
  line-height: 1.2;
}

/* Force line-height: 1.2 on all code elements using ::ng-deep */
/* This is critical for innerHTML content and Shiki output */
.markdown-code {
  line-height: 1.2 !important;
}

.markdown-code ::ng-deep code {
  line-height: 1.2 !important;
}

.markdown-code ::ng-deep .code-line {
  line-height: 1.2 !important;
}

.markdown-code ::ng-deep .code-line * {
  line-height: 1.2 !important;
}

/* Also apply to inline code within paragraphs */
.markdown-paragraph ::ng-deep code {
  line-height: 1.2 !important;
}

/* ========================================
 * Copy Button Styles
 * Floating button for copying raw markdown
 * ======================================== */

/* Container positioning for copy button */
.streaming-markdown-container {
  position: relative;
}

/* Copy button - top-right corner */
.copy-button {
  position: absolute;
  top: var(--spacing-md);
  right: var(--spacing-md);

  /* Ultra compact sizing */
  width: 28px;
  height: 28px;

  /* Mineral & Time color scheme - low saturation */
  background: oklch(0.91 0.015 85); /* 绢黄 Aged Silk */
  border: 1px solid oklch(0.85 0.015 85); /* 深绢黄 Dark Aged Silk */
  border-radius: var(--radius-sm);

  /* Icon styling */
  color: oklch(0.28 0.03 185); /* 深灰 Dark Gray */
  display: flex;
  align-items: center;
  justify-content: center;

  /* Icon size */
  svg {
    width: 14px;
    height: 14px;
  }

  /* Interactive states */
  cursor: pointer;
  transition: all 0.2s ease;
  opacity: 0.9;
  padding: 0;
}

/* Hover state - primary color (石绿 Malachite) */
.copy-button:hover {
  background: oklch(0.48 0.07 195); /* 石绿 Malachite */
  color: white;
  border-color: oklch(0.48 0.07 195);
  opacity: 1;
  transform: translateY(-1px);
}

/* Active state */
.copy-button:active {
  transform: translateY(0);
}

/* Copied state - primary color background */
.copy-button[aria-label*="Copied"] {
  background: oklch(0.48 0.07 195); /* 石绿 Malachite */
  color: white;
  border-color: oklch(0.48 0.07 195);
}

/* Focus state for accessibility */
.copy-button:focus-visible {
  outline: 2px solid oklch(0.48 0.07 195); /* 石绿 Malachite */
  outline-offset: 2px;
}

/* Fade-in animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 0.9;
    transform: translateY(0);
  }
}

.copy-button {
  animation: fadeIn 0.2s ease-out;
}
