@if (enableLiquidGlass) {
  <!-- 带 Liquid Glass 效果的输入框 -->
  <div class="input-container">
    <div
      liquidGlass
      lgTheme="mineral-light"
      lgCornerRadius="16px"
      [lgBlurAmount]="0.5"
      [lgDisplacementScale]="0"
      lgTint="oklch(0 0 0 / 2%)"
      lgHotspot="oklch(1 0 0 / 3%)"
      lgAriaLabel="AI chat input"
      class="input-wrapper"
      [class.focus-within]="isFocused()"
    >
      <!-- Input Area (Top) -->
      <div class="input-area">
        <textarea
          #textarea
          [style.height.px]="textareaHeight()"
          [value]="inputValue()"
          (input)="handleInput($event)"
          (keydown)="handleKeydown($event)"
          (focus)="handleFocus()"
          (blur)="handleBlur()"
          placeholder="Ask AI anything..."
          class="input-field"
          rows="1"
        ></textarea>
      </div>

      <!-- Toolbar (Bottom) -->
      <div class="toolbar">
        <!-- Left Tools -->
        <div class="tool-buttons-left">
          <button
            type="button"
            class="icon-button"
            title="Add file"
            [attr.aria-label]="'Add file'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" />
            </svg>
          </button>

          <button
            type="button"
            class="icon-button"
            title="Add image"
            [attr.aria-label]="'Add image'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
              <circle cx="9" cy="9" r="2" />
              <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
            </svg>
          </button>
        </div>

        <!-- Right Actions -->
        <div class="action-buttons-right">
          <button
            type="button"
            class="icon-button voice-button"
            title="Voice input"
            [attr.aria-label]="'Voice input'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
              <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
              <line x1="12" x2="12" y1="19" y2="22" />
            </svg>
          </button>

          <!-- Circular Send Button -->
          <button
            type="button"
            class="send-button"
            [class.send-active]="canSend()"
            [disabled]="!canSend()"
            (click)="sendMessage()"
            [attr.aria-label]="'Send message'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 2L11 13" />
              <path d="M22 2l-7 20-4-9-9-4 20-7z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
} @else {
  <!-- 基础输入框（无 liquid glass 效果，性能更好） -->
  <div class="input-container">
    <div
      class="input-wrapper input-wrapper-plain"
      [class.focus-within]="isFocused()"
    >
      <!-- Input Area (Top) -->
      <div class="input-area">
        <textarea
          #textarea
          [style.height.px]="textareaHeight()"
          [value]="inputValue()"
          (input)="handleInput($event)"
          (keydown)="handleKeydown($event)"
          (focus)="handleFocus()"
          (blur)="handleBlur()"
          placeholder="Ask AI anything..."
          class="input-field"
          rows="1"
        ></textarea>
      </div>

      <!-- Toolbar (Bottom) -->
      <div class="toolbar">
        <!-- Left Tools -->
        <div class="tool-buttons-left">
          <button
            type="button"
            class="icon-button"
            title="Add file"
            [attr.aria-label]="'Add file'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" />
            </svg>
          </button>

          <button
            type="button"
            class="icon-button"
            title="Add image"
            [attr.aria-label]="'Add image'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
              <circle cx="9" cy="9" r="2" />
              <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
            </svg>
          </button>
        </div>

        <!-- Right Actions -->
        <div class="action-buttons-right">
          <button
            type="button"
            class="icon-button voice-button"
            title="Voice input"
            [attr.aria-label]="'Voice input'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
              <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
              <line x1="12" x2="12" y1="19" y2="22" />
            </svg>
          </button>

          <!-- Circular Send Button -->
          <button
            type="button"
            class="send-button"
            [class.send-active]="canSend()"
            [disabled]="!canSend()"
            (click)="sendMessage()"
            [attr.aria-label]="'Send message'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 2L11 13" />
              <path d="M22 2l-7 20-4-9-9-4 20-7z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
}
