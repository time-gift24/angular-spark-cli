@import 'tailwindcss';
@import '@fontsource/figtree/300.css';
@import '@fontsource/figtree/400.css';
@import '@fontsource/figtree/500.css';
@import '@fontsource/figtree/600.css';

@theme inline {
  /* Color mapping - maps to CSS variables below */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Chart colors */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Sidebar colors */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Font family - Figtree for lighter, modern appearance */
  --font-sans:
    'Figtree', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol', 'Noto Color Emoji';

  /* Mira compact radius scale - even smaller for slimmer design */
  --radius-sm: calc(var(--radius) - 1px);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) + 1px);
  --radius-xl: calc(var(--radius) + 2px);
  --radius-2xl: calc(var(--radius) + 3px);
  --radius-3xl: calc(var(--radius) + 4px);
  --radius-4xl: calc(var(--radius) + 5px);

  /* Global spacing scale - for consistent compact sizing */
  --spacing-xs: 0.125rem; /* 2px */
  --spacing-sm: 0.25rem; /* 4px */
  --spacing-md: 0.5rem; /* 8px */
  --spacing-lg: 0.75rem; /* 12px */
  --spacing-xl: 1rem; /* 16px */

  /* Component sizing - smaller scale */
  --button-height-sm: 1.625rem; /* 26px */
  --button-height-md: 1.875rem; /* 30px */
  --button-height-lg: 2.125rem; /* 34px */

  --button-padding-x-sm: 0.5rem; /* 8px */
  --button-padding-x-md: 0.625rem; /* 10px */
  --button-padding-x-lg: 0.75rem; /* 12px */

  --button-padding-y: 0.375rem; /* 6px - compact */

  /* === Component Sizing Tokens === */

  /* Badge */
  --badge-padding-x: 0.5rem; /* 8px */
  --badge-padding-y: 0.125rem; /* 2px */
  --badge-radius: 9999px;

  /* Card */
  --card-padding: 1.5rem; /* 24px */
  --card-padding-sm: 1rem; /* 16px */

  /* Checkbox */
  --checkbox-size: 1rem; /* 16px */
  --checkbox-icon-size: 0.875rem; /* 14px */
  --checkbox-border-radius: 4px;

  /* Icon sizing */
  --icon-size-xs: 0.75rem; /* 12px */
  --icon-size-sm: 0.875rem; /* 14px */
  --icon-size-md: 1rem; /* 16px */

  /* Input */
  --input-padding-x: 0.75rem; /* 12px */
  --input-padding-y: 0.625rem; /* 10px - 更舒适的垂直内边距 */
  --input-height: 2.5rem; /* 40px - 标准输入框高度 */
  --input-min-height: 2.25rem; /* 36px - 最小高度 */

  /* Alert */
  --alert-padding-x: 1rem; /* 16px */
  --alert-padding-y: 0.75rem; /* 12px */
  --alert-radius: var(--radius-lg);

  /* Switch */
  --switch-width-sm: 1.5rem; /* 24px */
  --switch-height-sm: 0.875rem; /* 14px */
  --switch-width-md: 2rem; /* 32px */
  --switch-height-md: 1.125rem; /* 18px */
  --switch-thumb-size-sm: 0.75rem; /* 12px */
  --switch-thumb-size-md: 1rem; /* 16px */
  --switch-thumb-translate: calc(100% - 2px);

  /* Tabs */
  --tabs-list-height: 2.25rem; /* 36px */
  --tabs-trigger-padding-x: 0.5rem; /* 8px */
  --tabs-trigger-padding-y: 0.25rem; /* 4px */
  --tabs-trigger-inset: 1px;

  /* Sheet */
  --sheet-transition-duration: 300ms;
  --sheet-transition-easing: ease-out;
  --sheet-overlay-bg: oklch(0 0 0 / 80%);
  --sheet-padding: 1.5rem; /* 24px */
  --sheet-z-overlay: 50;
  --sheet-z-content: 50;
  --sheet-max-width: 28rem; /* 448px */

  /* Avatar */
  --avatar-size-sm: 2rem; /* 32px */
  --avatar-size-md: 2.5rem; /* 40px */
  --avatar-size-lg: 3rem; /* 48px */
  --avatar-font-size-sm: 0.75rem; /* 12px */
  --avatar-font-size-md: 0.875rem; /* 14px */
  --avatar-font-size-lg: 1rem; /* 16px */

  /* Separator */
  --separator-thickness: 1px;
  --separator-color: var(--border);

  /* Slider */
  --slider-height: 0.375rem; /* 6px - track height */
  --slider-thumb-size: 1rem; /* 16px */
  --slider-thumb-scale: 1.25; /* 20px - hover/focus */

  /* Context Menu */
  --context-menu-min-width: 10rem; /* 160px */
  --context-menu-max-width: 16rem; /* 256px */
  --context-menu-item-height: 2rem; /* 32px */
  --context-menu-item-padding-x: 0.75rem; /* 12px */
  --context-menu-item-inset: 0.75rem; /* 12px - for inset items */

  /* Table */
  --table-cell-padding: var(--spacing-lg); /* 12px */
  --table-head-height: 3rem; /* 48px */
  --table-caption-margin-top: var(--spacing-xl); /* 16px */
  --table-border-width: 1px;
  --table-hover-bg-opacity: 0.5;
  --table-selected-bg-opacity: 1;
  --table-font-size: 0.875rem; /* 14px - text-sm */

  /* Animation durations (reusable) */
  --duration-instant: 100ms;
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;

  /* Transition timing functions */
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* Opacity levels */
  --opacity-disabled: 0.5;
  --opacity-hover: 0.9;
  --opacity-focus: 0.8;

  /* Focus ring */
  --focus-ring-width: 1px;
  --focus-ring-offset: 1px;
  --focus-ring-radius: var(--radius-md);
}

@layer base {
  :root {
    /* Light mode - 矿物与时光 (Mineral & Time) 岩彩主题 */
    /* 背景色 - 绢黄 (Aged Silk): 模拟千年画卷的氧化底色 */
    --background: oklch(0.91 0.015 85);
    --foreground: oklch(0.28 0.03 185);

    /* Card - 稍深绢黄,营造层次感 */
    --card: oklch(0.94 0.012 85);
    --card-foreground: oklch(0.28 0.03 185);
    --popover: oklch(0.94 0.012 85);
    --popover-foreground: oklch(0.28 0.03 185);

    /* Primary - 石绿 (Malachite Green): #2B6D61 - 沉稳通透,核心视觉元素 */
    --primary: oklch(0.48 0.07 195);
    --primary-foreground: oklch(0.98 0.01 85);

    /* Secondary - 浅绢黄: 提供柔和对比 */
    --secondary: oklch(0.92 0.02 85);
    --secondary-foreground: oklch(0.35 0.06 225);

    /* Muted - 浅绢黄,柔和背景 */
    --muted: oklch(0.95 0.01 85);
    --muted-foreground: oklch(0.5 0.025 195);

    /* Accent - 泥金 (Gold): #C8A051 - 极少使用,边框/icon/悬停效果 */
    --accent: oklch(0.7 0.12 75);
    --accent-foreground: oklch(0.98 0.01 85);

    /* Destructive - 深红: 保持足够的对比度和可读性 */
    --destructive: oklch(0.5 0.2 25);
    --destructive-foreground: oklch(0.98 0 0);

    /* Borders and inputs - 深绢黄边框,低饱和度 */
    --border: oklch(0.85 0.015 85);
    --input: oklch(0.85 0.015 85);
    --ring: oklch(0.48 0.07 195);

    /* Chart colors - 矿物色谱: 石绿、石青、泥金及其渐变 */
    --chart-1: oklch(0.48 0.07 195); /* 石绿 */
    --chart-2: oklch(0.42 0.08 225); /* 石青深 */
    --chart-3: oklch(0.55 0.06 195); /* 石绿浅 */
    --chart-4: oklch(0.7 0.12 75); /* 泥金 */
    --chart-5: oklch(0.6 0.05 210); /* 石青浅 */

    /* Base radius - Ultra compact for slimmer design */
    --radius: 0.25rem;

    /* Sidebar colors */
    --sidebar: oklch(0.93 0.015 85);
    --sidebar-foreground: oklch(0.28 0.03 185);
    --sidebar-primary: oklch(0.48 0.07 195);
    --sidebar-primary-foreground: oklch(0.98 0.01 85);
    --sidebar-accent: oklch(0.7 0.12 75);
    --sidebar-accent-foreground: oklch(0.28 0.03 185);
    --sidebar-border: oklch(0.8 0.02 85);
    --sidebar-ring: oklch(0.48 0.07 195);
  }

  .dark {
    /* Dark mode - 矿物与时光 (Mineral & Time) 岩彩主题 */
    /* 背景色 - 深石青: 夜晚山峦的深邃 */
    --background: oklch(0.2 0.04 230);
    --foreground: oklch(0.94 0.015 85);

    /* Card - 稍浅石青,营造层次感 */
    --card: oklch(0.24 0.045 230);
    --card-foreground: oklch(0.94 0.015 85);
    --popover: oklch(0.24 0.045 230);
    --popover-foreground: oklch(0.94 0.015 85);

    /* Primary - 浅石绿: 暗夜中的玉石光晕 */
    --primary: oklch(0.62 0.08 195);
    --primary-foreground: oklch(0.2 0.04 230);

    /* Secondary - 深绢黄: 提供微暖对比 */
    --secondary: oklch(0.3 0.035 85);
    --secondary-foreground: oklch(0.94 0.015 85);

    /* Muted - 深石青,柔和背景 */
    --muted: oklch(0.28 0.04 230);
    --muted-foreground: oklch(0.65 0.035 195);

    /* Accent - 亮泥金: 暗夜中的金色点缀 */
    --accent: oklch(0.75 0.14 75);
    --accent-foreground: oklch(0.2 0.04 230);

    /* Destructive - 亮红: 暗色模式下保持足够的对比度 */
    --destructive: oklch(0.65 0.2 25);
    --destructive-foreground: oklch(0.98 0 0);

    /* Borders and inputs - 半透明石青边框 */
    --border: oklch(0.35 0.04 230 / 50%);
    --input: oklch(0.35 0.04 230 / 60%);
    --ring: oklch(0.62 0.08 195);

    /* Chart colors - 矿物色谱暗色版本 */
    --chart-1: oklch(0.62 0.08 195); /* 浅石绿 */
    --chart-2: oklch(0.55 0.09 225); /* 浅石青 */
    --chart-3: oklch(0.68 0.07 195); /* 石绿中 */
    --chart-4: oklch(0.75 0.14 75); /* 亮泥金 */
    --chart-5: oklch(0.7 0.06 210); /* 石青中 */

    /* Sidebar colors - dark mode */
    --sidebar: oklch(0.24 0.045 230);
    --sidebar-foreground: oklch(0.94 0.015 85);
    --sidebar-primary: oklch(0.62 0.08 195);
    --sidebar-primary-foreground: oklch(0.2 0.04 230);
    --sidebar-accent: oklch(0.75 0.14 75);
    --sidebar-accent-foreground: oklch(0.2 0.04 230);
    --sidebar-border: oklch(0.35 0.04 230 / 50%);
    --sidebar-ring: oklch(0.62 0.08 195);
  }

  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground text-sm font-sans antialiased;
  }

  /* Ultra compact typography - slimmer design with lighter Figtree */
  h1 {
    @apply text-xl font-semibold tracking-tight;
  }
  h2 {
    @apply text-lg font-medium;
  }
  h3 {
    @apply text-base font-medium;
  }
  h4 {
    @apply text-sm font-medium;
  }
  p {
    @apply text-sm font-normal leading-snug;
  }
  small {
    @apply text-xs font-normal;
  }

  /* Markdown Content Styles - for streaming-markdown component */
  /* These styles apply to markdown rendered via innerHTML */
  .markdown-block {
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    line-height: 1.6;
  }

  /* Exception: Code blocks should not inherit line-height from .markdown-block */
  .markdown-code {
    line-height: 1;
  }

  .markdown-code .line {
    line-height: 1;
  }

  .markdown-code code {
    line-height: 1;
  }

  /* Paragraphs inside markdown */
  .markdown-block p {
    margin-top: var(--spacing-md);
    margin-bottom: var(--spacing-md);
  }

  /* Headings inside markdown */
  .markdown-block h1,
  .markdown-block h2,
  .markdown-block h3,
  .markdown-block h4,
  .markdown-block h5,
  .markdown-block h6 {
    font-weight: 600;
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-md);
    color: var(--foreground);
  }

  .markdown-block h1 {
    font-size: 1.25rem;
    font-weight: 600;
  }

  .markdown-block h2 {
    font-size: 1.125rem;
    font-weight: 500;
  }

  .markdown-block h3 {
    font-size: 1rem;
    font-weight: 500;
  }

  /* Code blocks inside markdown */
  .markdown-block pre {
    background: var(--muted);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
  }

  .markdown-block code {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.875rem;
    background: var(--muted);
    padding: 0.125rem 0.25rem;
    border-radius: var(--radius-sm);
  }

  .markdown-block pre code {
    background: transparent;
    padding: 0;
  }

  /* Lists inside markdown */
  .markdown-block ul,
  .markdown-block ol {
    margin-left: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
  }

  .markdown-block ul {
    list-style-type: disc;
  }

  .markdown-block ol {
    list-style-type: decimal;
  }

  .markdown-block li {
    margin-left: var(--spacing-sm);
    padding-left: var(--spacing-sm);
  }

  .markdown-block li::marker {
    color: var(--muted-foreground);
  }

  /* Blockquotes inside markdown */
  .markdown-block blockquote {
    border-left: 3px solid var(--primary);
    padding-left: var(--spacing-md);
    color: var(--muted-foreground);
    margin-bottom: var(--spacing-md);
  }

  /* Links inside markdown */
  .markdown-block a {
    color: var(--primary);
    text-decoration: underline;
  }

  .markdown-block a:hover {
    color: var(--primary);
    opacity: 0.8;
  }

  /* Tables inside markdown */
  .markdown-block table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
  }

  .markdown-block th,
  .markdown-block td {
    border: 1px solid var(--border);
    padding: var(--spacing-sm) var(--spacing-md);
    text-align: left;
  }

  .markdown-block th {
    background: var(--muted);
    font-weight: 500;
  }

  /* Horizontal rules inside markdown */
  .markdown-block hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: var(--spacing-lg) 0;
  }

  /* Images inside markdown */
  .markdown-block img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    margin: var(--spacing-md) 0;
  }

  /* Streaming indicator animation */
  .markdown-block.streaming {
    opacity: 0.7;
    border-left: 2px solid var(--accent);
  }

  .streaming-indicator::after {
    content: '▌';
    animation: blink 1s infinite;
    margin-left: var(--spacing-sm);
    color: var(--accent);
  }

  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
}
