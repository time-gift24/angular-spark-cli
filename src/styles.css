@import 'tailwindcss';
@import '@fontsource/figtree/300.css';
@import '@fontsource/figtree/400.css';
@import '@fontsource/figtree/500.css';
@import '@fontsource/figtree/600.css';
@import 'katex/dist/katex.min.css';

@theme inline {
  /* Color mapping - maps to CSS variables below */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Chart colors */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Sidebar colors */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Font family - Figtree for lighter, modern appearance */
  --font-sans:
    'Figtree', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol', 'Noto Color Emoji';

  /* Mira compact radius scale - even smaller for slimmer design */
  --radius-sm: calc(var(--radius) - 1px);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) + 1px);
  --radius-xl: calc(var(--radius) + 2px);
  --radius-2xl: calc(var(--radius) + 3px);
  --radius-3xl: calc(var(--radius) + 4px);
  --radius-4xl: calc(var(--radius) + 5px);

  /* Global spacing scale - for consistent compact sizing */
  --spacing-xs: 0.125rem; /* 2px */
  --spacing-sm: 0.25rem; /* 4px */
  --spacing-md: 0.5rem; /* 8px */
  --spacing-lg: 0.75rem; /* 12px */
  --spacing-xl: 1rem; /* 16px */

  /* Component sizing - smaller scale */
  --button-height-sm: 1.625rem; /* 26px */
  --button-height-md: 1.875rem; /* 30px */
  --button-height-lg: 2.125rem; /* 34px */

  --button-padding-x-sm: 0.5rem; /* 8px */
  --button-padding-x-md: 0.625rem; /* 10px */
  --button-padding-x-lg: 0.75rem; /* 12px */

  --button-padding-y: 0.375rem; /* 6px - compact */

  /* === Component Sizing Tokens === */

  /* Badge */
  --badge-padding-x: 0.5rem; /* 8px */
  --badge-padding-y: 0.125rem; /* 2px */
  --badge-radius: 9999px;

  /* Card */
  --card-padding: 1.5rem; /* 24px */
  --card-padding-sm: 1rem; /* 16px */

  /* Checkbox */
  --checkbox-size: 1rem; /* 16px */
  --checkbox-icon-size: 0.875rem; /* 14px */
  --checkbox-border-radius: 4px;

  /* Icon sizing */
  --icon-size-xs: 0.75rem; /* 12px */
  --icon-size-sm: 0.875rem; /* 14px */
  --icon-size-md: 1rem; /* 16px */

  /* Input */
  --input-padding-x: 0.75rem; /* 12px */
  --input-padding-y: 0.625rem; /* 10px - 更舒适的垂直内边距 */
  --input-height: 2.5rem; /* 40px - 标准输入框高度 */
  --input-min-height: 2.25rem; /* 36px - 最小高度 */

  /* Alert */
  --alert-padding-x: 1rem; /* 16px */
  --alert-padding-y: 0.75rem; /* 12px */
  --alert-radius: var(--radius-lg);

  /* Switch */
  --switch-width-sm: 1.5rem; /* 24px */
  --switch-height-sm: 0.875rem; /* 14px */
  --switch-width-md: 2rem; /* 32px */
  --switch-height-md: 1.125rem; /* 18px */
  --switch-thumb-size-sm: 0.75rem; /* 12px */
  --switch-thumb-size-md: 1rem; /* 16px */
  --switch-thumb-translate: calc(100% - 2px);

  /* Tabs */
  --tabs-list-height: 2.25rem; /* 36px */
  --tabs-trigger-padding-x: 0.5rem; /* 8px */
  --tabs-trigger-padding-y: 0.25rem; /* 4px */
  --tabs-trigger-inset: 1px;

  /* Sheet */
  --sheet-transition-duration: 300ms;
  --sheet-transition-easing: ease-out;
  --sheet-overlay-bg: oklch(0 0 0 / 80%);
  --sheet-padding: 1.5rem; /* 24px */
  --sheet-z-overlay: 50;
  --sheet-z-content: 50;
  --sheet-max-width: 28rem; /* 448px */

  /* Avatar */
  --avatar-size-sm: 2rem; /* 32px */
  --avatar-size-md: 2.5rem; /* 40px */
  --avatar-size-lg: 3rem; /* 48px */
  --avatar-size-xl: 4rem; /* 64px */
  --avatar-font-size-sm: 0.75rem; /* 12px */
  --avatar-font-size-md: 0.875rem; /* 14px */
  --avatar-font-size-lg: 1rem; /* 16px */
  --avatar-font-size-xl: 1.125rem; /* 18px */

  /* Separator */
  --separator-thickness: 1px;
  --separator-color: var(--border);

  /* Progress */
  --progress-height: 0.25rem; /* 4px - track height */

  /* Slider */
  --slider-height: 0.375rem; /* 6px - track height */
  --slider-thumb-size: 1rem; /* 16px */
  --slider-thumb-scale: 1.25; /* 20px - hover/focus */

  /* Context Menu */
  --context-menu-min-width: 10rem; /* 160px */
  --context-menu-max-width: 16rem; /* 256px */
  --context-menu-item-height: 2rem; /* 32px */
  --context-menu-item-padding-x: 0.75rem; /* 12px */
  --context-menu-item-inset: 0.75rem; /* 12px - for inset items */

  /* Utility color tokens */
  --mask-solid: #000;

  /* Table */
  --table-cell-padding: var(--spacing-lg); /* 12px */
  --table-head-height: 3rem; /* 48px */
  --table-caption-margin-top: var(--spacing-xl); /* 16px */
  --table-border-width: 1px;
  --table-hover-bg-opacity: 0.5;
  --table-selected-bg-opacity: 1;
  --table-font-size: 0.875rem; /* 14px - text-sm */

  /* Animation durations (reusable) */
  --duration-instant: 100ms;
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;

  /* Transition timing functions */
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* Spring easing curves via CSS linear() */
  /*
   * Spring-smooth: gentle settle, no visible overshoot
   * Use for: collapse/expand, fade transitions, subtle state changes
   */
  --ease-spring-smooth: linear(
    0,
    0.011,
    0.044,
    0.098,
    0.175,
    0.273,
    0.393,
    0.535,
    0.696,
    0.869,
    1.035,
    1.17,
    1.251,
    1.274,
    1.249,
    1.196,
    1.13,
    1.067,
    1.014,
    0.978,
    0.959,
    0.954,
    0.961,
    0.975,
    0.99,
    1.002,
    1.008,
    1.008,
    1.004,
    1
  );

  /*
   * Spring-bounce: visible overshoot + settle
   * Use for: panel open, element entrance, tab switch indicator
   */
  --ease-spring-bounce: linear(
    0,
    0.009,
    0.035,
    0.078,
    0.141,
    0.223,
    0.326,
    0.447,
    0.583,
    0.73,
    0.876,
    1.01,
    1.12,
    1.194,
    1.229,
    1.226,
    1.191,
    1.131,
    1.056,
    0.975,
    0.9,
    0.84,
    0.802,
    0.785,
    0.793,
    0.822,
    0.867,
    0.92,
    0.972,
    1.012,
    1.034,
    1.035,
    1.016,
    0.987,
    0.956,
    0.932,
    0.92,
    0.924,
    0.942,
    0.968,
    0.996,
    1.014,
    1.02,
    1.013,
    1
  );

  /*
   * Spring-snappy: fast attack, quick settle, minimal overshoot
   * Use for: button press feedback, micro-interactions, hover states
   */
  --ease-spring-snappy: linear(
    0,
    0.05,
    0.18,
    0.37,
    0.58,
    0.77,
    0.91,
    1.01,
    1.07,
    1.08,
    1.05,
    1.01,
    0.98,
    0.97,
    0.98,
    0.99,
    1
  );

  /* Spring animation durations */
  --duration-spring-fast: 350ms;
  --duration-spring-normal: 500ms;
  --duration-spring-slow: 700ms;

  /* Stagger delay tokens for choreographed entrances */
  --stagger-1: 0ms;
  --stagger-2: 40ms;
  --stagger-3: 80ms;
  --stagger-4: 120ms;
  --stagger-5: 160ms;
  --stagger-6: 200ms;

  /* Opacity levels */
  --opacity-disabled: 0.5;
  --opacity-hover: 0.9;
  --opacity-focus: 0.8;

  /* Focus ring */
  --focus-ring-width: 1px;
  --focus-ring-offset: 1px;
  --focus-ring-radius: var(--radius-md);

  /* Shadows */
  --shadow-popover: 0 4px 6px -1px oklch(0 0 0 / 0.1), 0 2px 4px -2px oklch(0 0 0 / 0.1);
  --shadow-control: 0 1px 3px oklch(0 0 0 / 0.1);
  --shadow-control-hover: 0 4px 8px oklch(0 0 0 / 0.15);
  --shadow-control-active: 0 2px 6px oklch(0 0 0 / 0.2);
  --shadow-input-hover: 0 2px 4px oklch(0 0 0 / 0.08);
  --shadow-avatar-interactive: 0 4px 12px oklch(0 0 0 / 0.1);
  --shadow-focus-ring: 0 0 0 3px oklch(from var(--ring) calc(l + 0.15) c h / 0.25);
  --shadow-focus-ring-destructive: 0 0 0 3px
    oklch(from var(--destructive) calc(l + 0.15) c h / 0.25);
}

@layer base {
  :root {
    /* Light mode - 矿物与时光 (Mineral & Time) 岩彩主题 */
    /* 背景色 - 绢黄 (Aged Silk): 模拟千年画卷的氧化底色 */
    --background: oklch(0.91 0.015 85);
    --foreground: oklch(0.28 0.03 185);

    /* Card - 稍深绢黄,营造层次感 */
    --card: oklch(0.94 0.012 85);
    --card-foreground: oklch(0.28 0.03 185);
    --popover: oklch(0.94 0.012 85);
    --popover-foreground: oklch(0.28 0.03 185);

    /* Primary - 石绿 (Malachite Green): #2B6D61 - 沉稳通透,核心视觉元素 */
    --primary: oklch(0.48 0.07 195);
    --primary-foreground: oklch(0.98 0.01 85);

    /* Secondary - 浅绢黄: 提供柔和对比 */
    --secondary: oklch(0.92 0.02 85);
    --secondary-foreground: oklch(0.35 0.06 225);

    /* Muted - 浅绢黄,柔和背景 */
    --muted: oklch(0.95 0.01 85);
    --muted-foreground: oklch(0.5 0.025 195);

    /* Accent - 泥金 (Gold): #C8A051 - 极少使用,边框/icon/悬停效果 */
    --accent: oklch(0.7 0.12 75);
    --accent-foreground: oklch(0.98 0.01 85);
    --accent-hover: oklch(0.8 0.15 75); /* Brighter, more saturated */
    --accent-active: oklch(0.6 0.18 65); /* 偏红的泥金色 - 激活态 */

    /* Destructive - 深红: 保持足够的对比度和可读性 */
    --destructive: oklch(0.5 0.2 25);
    --destructive-foreground: oklch(0.98 0 0);

    /* Borders and inputs - 深绢黄边框,低饱和度 */
    --border: oklch(0.85 0.015 85);
    --input: oklch(0.85 0.015 85);
    --ring: oklch(0.48 0.07 195);

    /* Chart colors - 矿物色谱: 石绿、石青、泥金及其渐变 */
    --chart-1: oklch(0.48 0.07 195); /* 石绿 */
    --chart-2: oklch(0.42 0.08 225); /* 石青深 */
    --chart-3: oklch(0.55 0.06 195); /* 石绿浅 */
    --chart-4: oklch(0.7 0.12 75); /* 泥金 */
    --chart-5: oklch(0.6 0.05 210); /* 石青浅 */

    /* Base radius - Ultra compact for slimmer design */
    --radius: 0.25rem;

    /* Sidebar colors */
    --sidebar: oklch(0.93 0.015 85);
    --sidebar-foreground: oklch(0.28 0.03 185);
    --sidebar-primary: oklch(0.48 0.07 195);
    --sidebar-primary-foreground: oklch(0.98 0.01 85);
    --sidebar-accent: oklch(0.7 0.12 75);
    --sidebar-accent-foreground: oklch(0.28 0.03 185);
    --sidebar-border: oklch(0.8 0.02 85);
    --sidebar-ring: oklch(0.48 0.07 195);
  }

  .theme-tiny3 {
    /* Light mode - Tiny3 Theme: 蓝色主色 + 红色强调 */
    /* 背景色 - 纯白 */
    --background: oklch(1 0 0);
    --foreground: oklch(0.1 0 0);

    /* Card - 纯白 */
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.1 0 0);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.1 0 0);

    /* Primary - 主题蓝色: 鲜明的主色 */
    --primary: oklch(0.55 0.15 250);
    --primary-foreground: oklch(1 0 0);

    /* Secondary - 次要灰色 */
    --secondary: oklch(0.96 0 0);
    --secondary-foreground: oklch(0.2 0 0);

    /* Muted - 浅灰背景 */
    --muted: oklch(0.96 0 0);
    --muted-foreground: oklch(0.45 0 0);

    /* Accent - 浅蓝色变体: 用于悬停、高亮等辅助效果 */
    --accent: oklch(0.75 0.08 250);
    --accent-foreground: oklch(0.1 0 0);
    --accent-hover: oklch(0.7 0.1 250);
    --accent-active: oklch(0.6 0.12 250);

    /* Destructive - 强调红: 用于危险/删除操作 */
    --destructive: oklch(0.55 0.15 20);
    --destructive-foreground: oklch(1 0 0);

    /* Borders and inputs - 浅灰边框 */
    --border: oklch(0.92 0 0);
    --input: oklch(0.98 0 0);
    --ring: oklch(0.55 0.15 250);

    /* Chart colors - 蓝色系 + 强调红 */
    --chart-1: oklch(0.55 0.15 250); /* 主题蓝 */
    --chart-2: oklch(0.65 0.12 250); /* 浅蓝 */
    --chart-3: oklch(0.7 0.1 250); /* 更浅蓝 */
    --chart-4: oklch(0.55 0.15 20); /* 强调红 */
    --chart-5: oklch(0.6 0.08 280); /* 紫蓝 */

    /* Sidebar colors - light mode */
    --sidebar: oklch(0.98 0 0);
    --sidebar-foreground: oklch(0.1 0 0);
    --sidebar-primary: oklch(0.55 0.15 250);
    --sidebar-primary-foreground: oklch(1 0 0);
    --sidebar-accent: oklch(0.75 0.08 250);
    --sidebar-accent-foreground: oklch(0.1 0 0);
    --sidebar-border: oklch(0.92 0 0);
    --sidebar-ring: oklch(0.55 0.15 250);
  }

  .theme-tiny3.dark {
    /* Dark mode - Tiny3 Theme */
    /* 背景色 - 深灰黑 */
    --background: oklch(0.15 0 0);
    --foreground: oklch(0.95 0 0);

    /* Card - 深灰 */
    --card: oklch(0.18 0 0);
    --card-foreground: oklch(0.95 0 0);
    --popover: oklch(0.18 0 0);
    --popover-foreground: oklch(0.95 0 0);

    /* Primary - 亮蓝色 */
    --primary: oklch(0.65 0.15 250);
    --primary-foreground: oklch(0.15 0 0);

    /* Secondary - 深灰 */
    --secondary: oklch(0.25 0 0);
    --secondary-foreground: oklch(0.95 0 0);

    /* Muted - 深灰 */
    --muted: oklch(0.22 0 0);
    --muted-foreground: oklch(0.6 0 0);

    /* Accent - 亮蓝色变体: 用于悬停、高亮 */
    --accent: oklch(0.8 0.08 250);
    --accent-foreground: oklch(0.1 0 0);
    --accent-hover: oklch(0.75 0.1 250);
    --accent-active: oklch(0.65 0.12 250);

    /* Destructive - 亮红 */
    --destructive: oklch(0.65 0.15 20);
    --destructive-foreground: oklch(1 0 0);

    /* Borders and inputs - 半透明边框 */
    --border: oklch(0.3 0 0 / 60%);
    --input: oklch(0.25 0 0 / 80%);
    --ring: oklch(0.65 0.15 250);

    /* Chart colors - 暗色版本 */
    --chart-1: oklch(0.65 0.15 250);
    --chart-2: oklch(0.7 0.12 250);
    --chart-3: oklch(0.75 0.1 250);
    --chart-4: oklch(0.65 0.15 20);
    --chart-5: oklch(0.7 0.08 280);

    /* Sidebar colors - dark mode */
    --sidebar: oklch(0.18 0 0);
    --sidebar-foreground: oklch(0.95 0 0);
    --sidebar-primary: oklch(0.65 0.15 250);
    --sidebar-primary-foreground: oklch(0.15 0 0);
    --sidebar-accent: oklch(0.8 0.08 250);
    --sidebar-accent-foreground: oklch(0.15 0 0);
    --sidebar-border: oklch(0.3 0 0 / 60%);
    --sidebar-ring: oklch(0.65 0.15 250);
  }

  .dark {
    /* Dark mode - 矿物与时光 (Mineral & Time) 岩彩主题 */
    /* 背景色 - 深石青: 夜晚山峦的深邃 */
    --background: oklch(0.2 0.04 230);
    --foreground: oklch(0.94 0.015 85);

    /* Card - 稍浅石青,营造层次感 */
    --card: oklch(0.24 0.045 230);
    --card-foreground: oklch(0.94 0.015 85);
    --popover: oklch(0.24 0.045 230);
    --popover-foreground: oklch(0.94 0.015 85);

    /* Primary - 浅石绿: 暗夜中的玉石光晕 */
    --primary: oklch(0.62 0.08 195);
    --primary-foreground: oklch(0.2 0.04 230);

    /* Secondary - 深绢黄: 提供微暖对比 */
    --secondary: oklch(0.3 0.035 85);
    --secondary-foreground: oklch(0.94 0.015 85);

    /* Muted - 深石青,柔和背景 */
    --muted: oklch(0.28 0.04 230);
    --muted-foreground: oklch(0.65 0.035 195);

    /* Accent - 亮泥金: 暗夜中的金色点缀 */
    --accent: oklch(0.75 0.14 75);
    --accent-foreground: oklch(0.2 0.04 230);
    --accent-hover: oklch(0.82 0.16 75); /* Brighter, more saturated */
    --accent-active: oklch(0.65 0.19 65); /* 偏红的泥金色 - 激活态 */

    /* Destructive - 亮红: 暗色模式下保持足够的对比度 */
    --destructive: oklch(0.65 0.2 25);
    --destructive-foreground: oklch(0.98 0 0);

    /* Borders and inputs - 半透明石青边框 */
    --border: oklch(0.35 0.04 230 / 50%);
    --input: oklch(0.35 0.04 230 / 60%);
    --ring: oklch(0.62 0.08 195);

    /* Chart colors - 矿物色谱暗色版本 */
    --chart-1: oklch(0.62 0.08 195); /* 浅石绿 */
    --chart-2: oklch(0.55 0.09 225); /* 浅石青 */
    --chart-3: oklch(0.68 0.07 195); /* 石绿中 */
    --chart-4: oklch(0.75 0.14 75); /* 亮泥金 */
    --chart-5: oklch(0.7 0.06 210); /* 石青中 */

    /* Sidebar colors - dark mode */
    --sidebar: oklch(0.24 0.045 230);
    --sidebar-foreground: oklch(0.94 0.015 85);
    --sidebar-primary: oklch(0.62 0.08 195);
    --sidebar-primary-foreground: oklch(0.2 0.04 230);
    --sidebar-accent: oklch(0.75 0.14 75);
    --sidebar-accent-foreground: oklch(0.2 0.04 230);
    --sidebar-border: oklch(0.35 0.04 230 / 50%);
    --sidebar-ring: oklch(0.62 0.08 195);
  }

  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground text-sm font-sans antialiased;
  }

  /* Ultra compact typography - slimmer design with lighter Figtree */
  h1 {
    @apply text-xl font-semibold tracking-tight;
  }
  h2 {
    @apply text-lg font-medium;
  }
  h3 {
    @apply text-base font-medium;
  }
  h4 {
    @apply text-sm font-medium;
  }
  p {
    @apply text-sm font-normal leading-snug;
  }
  small {
    @apply text-xs font-normal;
  }
}

/* === Spring Animation Keyframes === */

/* Panel entrance: scale + fade from bottom-right origin */
@keyframes spring-scale-in {
  from {
    opacity: 0;
    transform: scale(0.92) translateY(8px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Panel exit: scale + fade to bottom-right origin */
@keyframes spring-scale-out {
  from {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  to {
    opacity: 0;
    transform: scale(0.92) translateY(8px);
  }
}

/* Message bubble entrance: slight scale + vertical slide */
@keyframes spring-message-in {
  from {
    opacity: 0;
    transform: scale(0.94) translateY(6px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Generic fade + slide up (for content sections) */
@keyframes spring-fade-up {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Button press: scale down then spring back (applied on :active) */
@keyframes spring-press {
  0% {
    transform: scale(1);
  }
  40% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

/* Collapse: height shrink with fade */
@keyframes spring-collapse {
  from {
    opacity: 1;
    transform: scaleY(1);
    max-height: 999px;
  }
  to {
    opacity: 0;
    transform: scaleY(0.95);
    max-height: 0;
  }
}

/* Expand: height grow with fade */
@keyframes spring-expand {
  from {
    opacity: 0;
    transform: scaleY(0.95);
  }
  to {
    opacity: 1;
    transform: scaleY(1);
  }
}

/* === AI Chat Panel Animations === */

/* Panel slide in from right - width + opacity only, no scale */
@keyframes panel-slide-in {
  from {
    opacity: 0;
    width: 0;
  }
  to {
    opacity: 1;
    /* width controlled by inline style */
  }
}

/* Panel slide out to right - width + opacity only, no scale */
@keyframes panel-slide-out {
  from {
    opacity: 1;
    /* width controlled by inline style */
  }
  to {
    opacity: 0;
    width: 0;
  }
}

/* Message bubble entrance */
@keyframes message-bubble-in {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Apply animations */
.ai-chat-panel-enter {
  animation: panel-slide-in 0.3s var(--ease-spring-smooth) forwards;
}

.ai-chat-panel-exit {
  animation: panel-slide-out 0.2s var(--ease-spring-smooth) forwards;
}

.message-bubble-enter {
  animation: message-bubble-in 0.2s var(--ease-spring-snappy) forwards;
}

/* === AI Chat Panel Scrollbar === */

/* Thin scrollbar for panel messages area */
.ai-messages::-webkit-scrollbar {
  width: 6px;
}

.ai-messages::-webkit-scrollbar-track {
  background: transparent;
}

.ai-messages::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
  transition: background 0.2s;
}

.ai-messages::-webkit-scrollbar-thumb:hover {
  background: var(--muted-foreground);
}

/* Firefox scrollbar support */
.ai-messages {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

/* === AI Chat Panel Edge Glow === */

/* Subtle left edge glow using primary color */
.ai-chat-panel-glow {
  box-shadow:
    /* Ambient shadow for depth */
    0 1px 2px oklch(0 0 0 / 8%),
    0 4px 8px oklch(0 0 0 / 6%),
    0 12px 24px oklch(0 0 0 / 4%),
    /* Left edge glow - subtle primary color tint */ -2px 0 3px -1px
      oklch(from var(--primary) l c h / 0.12);
}

/* Dark mode: brighter glow for visibility against dark background */
.dark .ai-chat-panel-glow {
  box-shadow:
    /* Darker ambient shadows */
    0 1px 2px oklch(0 0 0 / 20%),
    0 4px 8px oklch(0 0 0 / 14%),
    0 12px 24px oklch(0 0 0 / 8%),
    /* Brighter left edge glow for dark mode */ -2px 0 3px -1px
      oklch(from var(--primary) l c h / 0.25);
}

/* === AI Chat Panel Glossy Glassmorphism === */

/* Enhanced glassmorphism: multi-layer gradient, stronger blur, inner glow */
.ai-chat-panel-glossy {
  background:
    /* Inner top highlight */
    linear-gradient(to bottom, oklch(from var(--card) l c h / 0.6) 0%, transparent 30%),
    /* Inner bottom shadow for depth */
    linear-gradient(to top, oklch(0 0 0 / 0.03) 0%, transparent 50%),
    /* Base transparent card color */ oklch(from var(--card) l c h / 0.85);
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  box-shadow:
    /* Inner glow for depth */
    inset 0 1px 0 oklch(from var(--foreground) l c h / 0.05),
    inset 0 -1px 0 oklch(0 0 0 / 0.02),
    /* Ambient shadow layers */ 0 1px 2px oklch(0 0 0 / 8%),
    0 4px 8px oklch(0 0 0 / 6%),
    0 12px 24px oklch(0 0 0 / 4%),
    /* Left edge glow - subtle primary color tint */ -2px 0 3px -1px
      oklch(from var(--primary) l c h / 0.12);
}

/* Dark mode: enhanced glass with different opacity values */
.dark .ai-chat-panel-glossy {
  background:
    /* Inner top highlight (brighter in dark mode) */
    linear-gradient(to bottom, oklch(from var(--card) l c h / 0.7) 0%, transparent 30%),
    /* Inner bottom shadow for depth */
    linear-gradient(to top, oklch(0 0 0 / 0.08) 0%, transparent 50%),
    /* Base transparent card color (more transparent in dark mode) */
    oklch(from var(--card) l c h / 0.75);
  backdrop-filter: blur(16px) saturate(150%);
  -webkit-backdrop-filter: blur(16px) saturate(150%);
  box-shadow:
    /* Inner glow for depth */
    inset 0 1px 0 oklch(from var(--foreground) l c h / 0.08),
    inset 0 -1px 0 oklch(0 0 0 / 0.06),
    /* Darker ambient shadows */ 0 1px 2px oklch(0 0 0 / 20%),
    0 4px 8px oklch(0 0 0 / 14%),
    0 12px 24px oklch(0 0 0 / 8%),
    /* Brighter left edge glow for dark mode */ -2px 0 3px -1px
      oklch(from var(--primary) l c h / 0.25);
}
